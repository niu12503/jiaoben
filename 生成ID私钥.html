<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solana Private Key Decoder</title>
  <script>
    // Base58 编码解码函数
    function Base58() {
      var ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';
      var ALPHABET_MAP = {};
      for (var i = 0; i < ALPHABET.length; ++i) {
        ALPHABET_MAP[ALPHABET.charAt(i)] = i;
      }
      var BASE = ALPHABET.length;
      var LEADER = ALPHABET.charAt(0);

      this.encode = function (source) {
        if (source.length === 0) return '';

        var digits = [0];
        for (var i = 0; i < source.length; ++i) {
          var carry = source[i];
          for (var j = 0; j < digits.length; ++j) {
            carry += digits[j] << 8;
            digits[j] = carry % BASE;
            carry = (carry / BASE) | 0;
          }

          while (carry > 0) {
            digits.push(carry % BASE);
            carry = (carry / BASE) | 0;
          }
        }

        var string = '';

        // Deal with leading zeros
        for (var k = 0; source[k] === 0 && k < source.length - 1; ++k) {
          string += LEADER;
        }
        // Convert digits to a string
        for (var q = digits.length - 1; q >= 0; --q) {
          string += ALPHABET[digits[q]];
        }
        return string;
      };

      this.decode = function (string) {
        if (string.length === 0) return [];

        var bytes = [0];
        for (var i = 0; i < string.length; ++i) {
          var value = ALPHABET_MAP[string[i]];
          if (value === undefined) throw new Error('Invalid character (' + string[i] + ')');

          var carry = value;
          for (var j = 0; j < bytes.length; ++j) {
            carry += bytes[j] * BASE;
            bytes[j] = carry & 0xff;
            carry >>= 8;
          }

          while (carry > 0) {
            bytes.push(carry & 0xff);
            carry >>= 8;
          }
        }

        // Deal with leading zeros
        for (var k = 0; string[k] === LEADER && k < string.length - 1; ++k) {
          bytes.push(0);
        }

        return bytes.reverse();
      };
    }

    // Base58 实例化
    var bs58 = new Base58();

    // 解码私钥函数
    function decodePrivateKey() {
      // 获取输入的私钥
      var solanaPrivateKeyBase58 = document.getElementById("privateKeyInput").value;

      // 检查输入是否为空
      if (solanaPrivateKeyBase58 === "") {
        alert("请输入 Solana 私钥！");
        return;
      }

      // 使用 bs58 解码私钥
      var privateKeyBytes = bs58.decode(solanaPrivateKeyBase58);

      // 将字节数组转换为 JSON 格式的文本
      var jsonText = JSON.stringify(Array.from(privateKeyBytes));

      // 在页面上显示结果
      document.getElementById("output").innerHTML = "<pre>" + jsonText + "</pre>";
    }
  </script>
</head>
<body>
<h1>Solana Private Key Decoder</h1>
<label for="privateKeyInput">Enter Solana Private Key (Base58):</label><br>
<input type="text" id="privateKeyInput"><br><br>
<button onclick="decodePrivateKey()">Decode Private Key</button><br><br>
<div id="output"></div>
</body>
</html>
